generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
}

// --- ENUMS ---

enum Availability {
  AVAILABLE
  BUSY
  OPEN_FOR_COMMISSION
}

enum MessageStatus {
  UNREAD
  READ
  ARCHIVED
  SPAM
}

// -----------------------------------------
// 1. IDENTITY & OWNER (The Core)
// -----------------------------------------

model User {
  id      String   @id @default(cuid())
  name    String?
  email   String?  @unique
  phone   String? // User-level phone field
  image   String?
  profile Profile?
}

model Profile {
  id     String @id @default("owner-static")
  userId String @unique
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  // Direct Contact Info
  email    String  @default("contact@example.com")
  phone    String? // Primary professional phone
  location String? @default("Remote / Yemen")

  // Relations
  contactMe ContactMe?
  updatedAt DateTime   @updatedAt
}

model ContactMe {
  id        String  @id @default(cuid())
  profileId String  @unique
  profile   Profile @relation(fields: [profileId], references: [id], onDelete: Cascade)

  // Social Channels & Handles
  githubUrl   String?
  linkedinUrl String?
  xUrl        String? // X (formerly Twitter)
  whatsapp    String?
  facebook    String?
  tiktok      String?
  figma       String?

  updatedAt DateTime @updatedAt
}

// -----------------------------------------
// 2. HERO & ABOUT (The Narrative)
// -----------------------------------------

model HeroSection {
  id              String       @id @default("hero-static")
  status          Availability @default(AVAILABLE)
  greeting        String       @default("Hi, I am")
  name            String       @default("Mohammed Yaseen")
  role            String       @default("Full-Stack Developer & AI Researcher")
  description     String       @db.Text
  primaryImage    String
  secondaryImages String[]
  resumeUrl       String?
  ctaText         String       @default("Start a Project")
  updatedAt       DateTime     @updatedAt
}

model AboutSection {
  id          String @id @default("about-static")
  title       String @default("A Hybrid Approach to Problem Solving")
  subtitle    String @default("My background in Security Research...")
  description String @db.Text

  corePillars CorePillars[]
  statuses    AboutStatus[]
  updatedAt   DateTime      @updatedAt
}

model AboutStatus {
  id             String       @id @default(cuid())
  label          String // e.g., "Years Exp."
  value          String // e.g., "3+"
  isActive       Boolean      @default(true)
  aboutSectionId String
  aboutSection   AboutSection @relation(fields: [aboutSectionId], references: [id], onDelete: Cascade)
  updatedAt      DateTime     @updatedAt
}

model CorePillars {
  id             String       @id @default(cuid())
  title          String
  description    String       @db.Text
  icon           String // Lucide icon name
  aboutSectionId String
  aboutSection   AboutSection @relation(fields: [aboutSectionId], references: [id], onDelete: Cascade)
  updatedAt      DateTime     @updatedAt
}

// -----------------------------------------
// 3. WORK, SKILLS & MESSAGES
// -----------------------------------------

model Project {
  id          String   @id @default(cuid())
  title       String
  slug        String   @unique
  description String   @db.Text
  content     String?  @db.Text
  coverImage  String
  gallery     String[]
  category    String
  liveUrl     String?
  repoUrl     String?
  isFeatured  Boolean  @default(false)
  isActive    Boolean  @default(true)
  isPublished Boolean  @default(false)
  skills      Skill[]  @relation("ProjectToSkill")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Skill {
  id       String    @id @default(cuid())
  name     String    @unique
  category String
  icon     String
  level    Int       @default(90)
  projects Project[] @relation("ProjectToSkill")
}

model ContactMessage {
  id        String        @id @default(cuid())
  name      String
  email     String
  subject   String?
  message   String        @db.Text
  status    MessageStatus @default(UNREAD)
  ipAddress String?
  createdAt DateTime      @default(now())
}

// -----------------------------------------
// 4. CREDENTIALS & CONFIG
// -----------------------------------------

model Testimonial {
  id        String   @id @default(cuid())
  name      String
  role      String
  avatar    String
  content   String   @db.Text
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
}

model Certification {
  id           String  @id @default(cuid())
  title        String
  issuer       String
  issueDate    String
  credentialId String?
  link         String?
}

model SiteConfig {
  id              String   @id @default("config-static")
  siteName        String   @default("DevPortfolio")
  footerText      String
  profileViews    Int      @default(0)
  enableBlog      Boolean  @default(true)
  metaDescription String?
  updatedAt       DateTime @updatedAt
}
